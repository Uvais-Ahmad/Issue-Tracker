<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>IssueTracker</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<style type="text/css">
		
	</style>
</head>
<body>

    <%- include('_header') %> 

	<main>
	
								<!-- view Project -->
		<div class="card w-50 mx-auto p-3 mt-2">
			<div class="card-body">

                <div class="row bg-info py-2">
					<h5 class="card-title col-3">Project - </h5>
					<h5 class="col text-secondary"><%= project.name %> </h5>
				</div>

				<div class="row py-2">
					<h5 class="card-title col-3">Author - </h5>
					<h5 class="col text-secondary"><%= project.author %> </h5>
				</div>

				<div class="row bg-info py-2">
					<h5 class="card-title col-3">Description - </h5>
					<h5 class="col text-secondary"><%= project.description %></h5>
				</div>
				
			</div>
		</div>

								<!-- btn of  ADD-ISSUE , FILTER , SEARCH -->

		<div class="w-50 border rounded mx-auto">
			<p>
				<button id='showColl' class="btn btn-primary mt-3 mx-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="true" aria-controls="collapseExample">
							Add issue
				</button>
			</p>
			
            <!-- AddIssue Form partials -->
            <%- include('_addIssueForm') %> 
			<hr>

									<!-- ISSUE LISTS CONTAINER -->
			<div class="">
				<h3 class="mx-3">Issue Lists</h3> 

										<!-- FIRST ISSUE -->
				<% if(issues){  %>
					<% for(issue of issues){ %>
						<div class="card mx-3 my-2">
							<h5 class="card-header"><%= issue.author %> </h5>
							<div class="card-body">
								<h5 class="card-title"><%= issue.title %> </h5>
								<p class="card-text"><%= issue.description %> </p>
								<div class="">
									<% for(lab of issue.label){ %>
										<span class="bg-warning p-2 rounded"><%= lab %></span>
									<% } %>
								</div>
							</div>				
						</div>
					<% } %> 
				<% }else{  %>
					<div class="card mx-3 my-2">
						<h5 class="card-header text-danger">Empty !</h5>
						<div class="card-body">
							<p class="card-text text-danger">!Oops your issue list is empty ,</p>
							<p class="card-text text-danger">Dont panic :) just analyse and add something here</p>
						</div>				
					</div>
				<% } %> 
				
			</div>
		</div>
	</main>

	<script type="text/javascript">
		let collapse = document.getElementById('collapseExample');
		let btn = document.getElementById('showColl');
		btn.addEventListener('click',collapseFun);

		function collapseFun(){
			let collapse = document.getElementById('collapseExample');

			if(collapse.getAttribute('class') == 'collapse'){
				collapse.setAttribute('class','collapse.show');
				btn.setAttribute('class','btn-close  mt-3 mx-3')
				btn.innerText = ""
			}
			else{
				collapse.setAttribute('class','collapse');
				btn.setAttribute('class','btn btn-primary  mt-3 mx-3')
				btn.innerText = "Add issue"
			}
		}

	</script>

</body>
</html>